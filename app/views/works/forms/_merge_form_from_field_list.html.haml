-# requires to be passed: form: the form being acted upon, field_list: a list of fields to generate - each entry is either
-# a symbol which gives both the partial name and id for the table row, or a two element row with the partial name and row id
-# may take hidden_fields, a hash for additional hidden fields
- hidden_fields ||= {}
%table#accepted_work.span-22
  %tr
    %td.span-8.duplicate
      %h3 #{t 'works.layouts.merge_form.duplicate'}
    %td.span-12
      %h3 #{t 'works.layouts.merge_form.accepted'}
  - field_list.each do |field, id|
    - unless field == :keywords and !current_user.has_role?("admin", System)
      %tr{:id => (id || field)}= render "works/forms/fields/merge_#{field}", :form => form

= hidden_field_tag :type, @work.class.to_s
- hidden_fields.each do |k, v|
  = hidden_field_tag k, v
= render 'works/forms/fields/form_buttons', :form => form
