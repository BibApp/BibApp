/ === Search === Index ===
/ Main
%div{:class => "span-24"}
  - if @q.nil?
    %div{:class => "span-22 prepend-1"}
      %p Search form here.
  - else
    %div{:class => "span-22 prepend-1"}
      %h2
        %em="#{@q.total_hits}"
        =" Results for:"
        %strong=" #{@query}"
      -if !@spelling_suggestions.empty?
        Did you mean:
        %ul#spelling-suggestions
          - @spelling_suggestions.each do |suggestion|
            %li
              %em=link_to suggestion, {:controller => "search", :q => suggestion }

      / People
      %div{:class => "span-16", :style => "padding:0em; margin:0em;"}
        %ol.people{:style => "padding:0em;margin:0em;"}
          -@facets[:person_id].each do |p|
            - person = object_by_facet_id(p.name)
            %li.inline{:style => "margin:0; padding:0;"}
              %div{:class => "span-3"}
                = link_to(image_tag(person.image_url, :size => "75x100", :alt => person.name, :title => person.name, :style => "border:2px dashed #CCC; padding:3px;"), person_path(person))
                %div{:style => "width:3em; padding:0.25em; margin:0em; background-color:#fff; position:relative; right:0em; bottom:2em; text-align:center;"}
                  %strong= p.value
                  %h7{:style => "padding-right:0.5em;"}=link_to person.last_name, person_path(person)

      / Groups
      %div{:class => "span-6"}
        %h3.heading Groups
        %ol.groups.facets
          -@facets[:group_id].each do |g|
            - group = object_by_facet_id(g.name)
            %li
              =link_to group.name, group_path(group)
              ="(#{g.value})"
 
    / Citations
    = render :partial => "shared/citations"

    / Facets
    %h3#filter Filter
    %div#facets{:class => "span-9 prepend-1 last"}
      = render :partial => "shared/facets"
